# 实时工资计算器 VSCode 插件

一个帮您实时计算当前工作收入的 VSCode 插件。

## 功能特点

- 📊 **实时显示**：在状态栏显示当前已赚取的工资
- ⚙️ **灵活配置**：可自定义月工资、工作时间等
- 🕐 **智能计算**：自动识别工作日，过滤节假日
- 🎉 **自动节假日**：自动从API获取最新的中国法定节假日和调休信息
- 🔧 **手动模式**：支持手动配置节假日和调休工作日
- 💰 **精确计算**：基于实际工作分钟数计算收入
- 🏠 **下班提醒**：下班后显示当日总收入和自定义提示词

## 显示逻辑

- **工作时间内**：显示 `$(symbol-currency) 实时💲：xx.xx 元`
- **下班后**：显示 `$(symbol-currency) 实时💲：xx.xx 元 💰下班啦！`（可自定义提示词）
- **非工作时间**：隐藏状态栏显示（包括上班前、节假日、周末）

## 使用方法

### 安装

1. 在 VSCode 中按 `Ctrl+Shift+P` 打开命令面板
2. 输入 "Extensions: Install from VSIX"
3. 选择插件文件进行安装

### 配置

1. 按 `Ctrl+,` 打开设置
2. 搜索 "realTimeSalary"
3. 配置以下参数：
   - **月总工资**：您的月薪（元）
   - **上班时间**：格式为 HH:MM，如 09:00
   - **下班时间**：格式为 HH:MM，如 18:00
   - **每周工作天数**：5（周一至周五）、6（周一至周六）或 7（每天）
   - **下班提示词**：下班后显示的自定义提示（默认：" 💰下班啦！"）
   - **自动获取节假日**：是否从API自动获取节假日信息（推荐开启）
   - **节假日列表**：手动设置的节假日（仅在关闭自动获取时生效）
   - **调休工作日**：手动设置的调休工作日（仅在关闭自动获取时生效）

### 使用

- 插件会在 VSCode 启动时自动开始计算
- 在工作时间内，状态栏右侧显示实时工资
- 下班后显示当日总收入和自定义提示词
- 非工作时间自动隐藏状态栏显示
- 点击状态栏项目可快速打开设置

### 命令

- `实时工资计算器：开始实时工资计算` - 开始计算
- `实时工资计算器：停止实时工资计算` - 停止计算
- `实时工资计算器：工资计算设置` - 打开设置
- `实时工资计算器：更新节假日信息` - 手动更新当年节假日信息

## 计算公式

```
每分钟工资 = 月总工资 / (当月工作天数 × 每天工作分钟数)
当前收入 = 已工作分钟数 × 每分钟工资
当日收入 = 每天工作分钟数 × 每分钟工资
```

其中：
- 每天工作分钟数 = 下班时间 - 上班时间（不包含午休）
- 当月工作天数 = 根据设置的每周工作天数计算，排除节假日，包含调休工作日
- 已工作分钟数 = 当前时间 - 上班时间

## 节假日功能

### 自动获取模式（推荐）

插件默认启用自动获取模式，会从 [天行数据API](http://timor.tech/api/holiday) 获取最新的中国法定节假日和调休信息，包括：

- 🎊 **法定节假日**：元旦、春节、清明节、劳动节、端午节、中秋节、国庆节等
- 📅 **调休工作日**：因节假日调休需要上班的周末
- 🔄 **自动更新**：每年自动获取最新的节假日安排
- 💾 **本地缓存**：减少网络请求，提高响应速度

### 手动配置模式

如果您需要自定义节假日安排，可以：

1. 关闭"自动获取节假日"选项
2. 在"节假日列表"中添加节假日，格式：["2024-01-01", "2024-10-01"]
3. 在"调休工作日"中添加需要上班的周末，格式：["2024-02-18", "2024-04-28"]

### 更新节假日

- **自动更新**：插件会自动缓存节假日信息，无需手动操作
- **手动更新**：可通过命令面板执行"更新节假日信息"命令强制更新
- **离线模式**：如果网络请求失败，会自动切换到手动配置模式

## 自定义提示词

您可以在设置中自定义下班后的提示词，例如：
- " 💰下班啦！"（默认）
- " 🎉今日收工！"
- " 😴该休息了！"
- " 🏡回家吃饭！"

## 开发

### 编译

```bash
npm install
npm run compile
```

### 打包

```bash
vsce package
```

## 许可证

MIT 